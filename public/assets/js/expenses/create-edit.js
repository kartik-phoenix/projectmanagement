(()=>{"use strict";$(document).ready((function(){$("#currency").select2({width:"100%",placeholder:Lang.get("messages.placeholder.select_currency")}),$(document).on("submit","#createExpense, #editExpense",(function(){if(jQuery(this).find("#btnSave").button("loading"),""!==$("#error-msg").text())return!1;var e=""===$("<div />").html($("#expenseNote").summernote("code")).text().trim().replace(/ \r\n\t/g,"");if($("#expenseNote").summernote("isEmpty"))$("#expenseNote").val("");else if(e){return displayErrorMessage("Note field is not contain only white space"),jQuery(this).find("#btnSave").button("reset"),!1}}));var e=0;$("#taxAmount").text(0),$("#expenseCategory").select2({width:"calc(100% - 44px)",placeholder:Lang.get("messages.placeholder.select_expanse_category")}),$("#customers").select2({width:"100%"}),$("#paymentMode").select2({width:"calc(100% - 44px)"}),$("#tax1,#tax2").select2({width:"100%"}),$(".price-input").trigger("input"),$(".datepicker").datetimepicker({format:"YYYY-MM-DD HH:mm:ss",useCurrent:!0,sideBySide:!0,icons:{up:"fa fa-chevron-up",down:"fa fa-chevron-down",next:"fa fa-chevron-right",previous:"fa fa-chevron-left"}}),$(".datepicker").on("dp.show",(function(){matchWindowScreenPixels({expenseDate:".datepicker"},"exp")})),$(document).on("keyup keydown","#amount",(function(){var a=null!==$("#amount").val()?removeCommas($("#amount").val()):0;e=a,!0===isEdit&&calculateEditedTaxAmount()})),window.calculateEditedTaxAmount=function(){var a=""!=$("#tax1").val()?$("#tax1").find(":selected").text():0,t=""!=$("#tax2").val()?$("#tax2").find(":selected").text():0,n=e*(parseFloat(a)+parseFloat(t))/100,o=parseFloat(e)+parseFloat(n);$("#taxRate").val(o)},!0===isEdit?($(document).ready((function(){e=null!==$("#amount").val()?removeCommas($("#amount").val()):0})),$(document).on("change","#tax1,#tax2",(function(a){""!=$("#tax1").val()||""!=$("#tax2").val()?calculateEditedTaxAmount():$("#taxRate").val(e)}))):($(document).on("change","#tax1,#tax2",(function(a){if(""!=$("#tax1").val()||""!=$("#tax2").val()){var t=""!=$("#tax1").val()?$("#tax1").find(":selected").text():0,n=""!=$("#tax2").val()?$("#tax2").find(":selected").text():0,o=e*(parseFloat(t)+parseFloat(n))/100;$("#taxAmount").text(addCommas(o)),$("#taxRate").val(e),checkTaxApplied(),$("#isTaxApplied").removeClass("d-none"),""==$("#tax1").val()&&""==$("#tax2").val()&&$("#taxApplied").prop("checked",!1)}else $("#taxApplied").prop("checked",!1),$("#taxAmount").text(""),$("#taxRate").val(""),$("#isTaxApplied").addClass("d-none"),calculateFinalAmount()})),window.calculateFinalAmount=function(){var a=void 0!==removeCommas($("#taxAmount").text())?removeCommas($("#taxAmount").text()):0,t=e-a;$("#amount").val(addCommas(t)),$("#taxRate").val(e)},$(document).on("change","#taxApplied",(function(){checkTaxApplied()})),window.checkTaxApplied=function(){!0===$("#taxApplied").prop("checked")?calculateFinalAmount():($("#amount").val(addCommas(e)),$("#taxRate").val(""))}),$(document).on("change","#billable",(function(){$(".showBillableFields").hasClass("d-none")?$(".showBillableFields").removeClass("d-none"):($("#autoCreateInvoice,#sendMail").prop("checked",!1),$(".showBillableFields").addClass("d-none"))})),window.removeCommas=function(e){return e.replace(/,/g,"")}})),$(document).on("mouseenter",".expense-attachment",(function(){$(this).find(".expense-attachment__icon").removeClass("d-none")})),$(document).on("mouseleave",".expense-attachment",(function(){$(this).find(".expense-attachment__icon").addClass("d-none")})),$(document).on("submit","#addExpenseCategoryForm",(function(e){e.preventDefault(),processingBtn("#addExpenseCategoryForm","#btnSave","loading"),$.ajax({url:route("expense-categories.store"),type:"POST",data:$(this).serialize(),success:function(e){if(e.success){displaySuccessMessage(e.message),$("#addExpenseCategoryModal").modal("hide");var a={id:e.data.id,name:e.data.name},t=new Option(a.name,a.id,!1,!0);$("#expenseCategory").append(t).trigger("change")}},error:function(e){displayErrorMessage(e.responseJSON.message)},complete:function(){processingBtn("#addExpenseCategoryForm","#btnSave")}})})),$("#addExpenseCategoryModal").on("hidden.bs.modal",(function(){resetModalForm("#addExpenseCategoryForm","#validationErrorsBox")}))})();