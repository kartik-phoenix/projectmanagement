(()=>{"use strict";$(document).ready((function(){$("#leadTagID").select2({width:"calc(100% - 44px)",placeholder:Lang.get("messages.placeholder.select_tags")}),$("#memberId,#countryId,#languageId").select2({width:"100%"}),$("#sourceId").select2({width:"calc(100% - 44px)",placeholder:Lang.get("messages.placeholder.select_source")}),$("#statusId").select2({width:"calc(100% - 44px)",placeholder:Lang.get("messages.placeholder.select_status")}),window.toggleDateField=function(e){!0===$(e).prop("checked")?$("#contactForm").slideUp():$("#contactForm").slideDown()},$(document).on("change","#checkContact",(function(){toggleDateField("#checkContact")})),"undefined"!=typeof isEdit&&isEdit&&toggleDateField("#checkContact"),$("#contactDateId").datetimepicker({format:"YYYY-MM-DD HH:mm:ss",useCurrent:!0,sideBySide:!0,icons:{up:"fa fa-chevron-up",down:"fa fa-chevron-down",next:"fa fa-chevron-right",previous:"fa fa-chevron-left"}}),$("#leadDescription").summernote({minHeight:200,toolbar:[["style",["bold","italic","underline","clear"]],["font",["strikethrough"]],["para",["paragraph"]]]}),$(document).on("submit","#createLead, #editLead",(function(){jQuery(this).find("#btnSave").button("loading");var e=""===$("<div />").html($("#leadDescription").summernote("code")).text().trim().replace(/ \r\n\t/g,"");if($("#leadDescription").summernote("isEmpty"))$("#leadDescription").val("");else if(e){return displayErrorMessage("Description field is not contain only white space"),jQuery(this).find("#btnSave").button("reset"),!1}if(""!==$("#error-msg").text())return $("#phoneNumber").focus(),!1})),$(document).on("blur","#website",(function(){var e=$(this).val();isEmpty(e)?$("#website").val(""):(e=websiteURLConvert(e),$("#website").val(e))})),window.websiteURLConvert=function(e){return~e.indexOf("http")||(e="http://"+e),e}})),$(document).on("submit","#addNewForm",(function(e){e.preventDefault(),processingBtn("#addNewForm","#btnSave","loading"),$.ajax({url:route("lead.source.store"),type:"POST",data:$(this).serialize(),success:function(e){if(e.success){displaySuccessMessage(e.message),$("#addModal").modal("hide");var t={id:e.data.id,name:e.data.name},a=new Option(t.name,t.id,!1,!0);$("#sourceId").append(a).trigger("change")}},error:function(e){displayErrorMessage(e.responseJSON.message)},complete:function(){processingBtn("#addNewForm","#btnSave")}})})),$("#addModal").on("hidden.bs.modal",(function(){resetModalForm("#addNewForm","#validationErrorsBox")})),$(document).on("submit","#addLeadStatusForm",(function(e){e.preventDefault(),processingBtn("#addLeadStatusForm","#btnSave","loading"),$.ajax({url:route("lead.status.store"),type:"POST",data:$(this).serialize(),success:function(e){if(e.success){displaySuccessMessage(e.message),$("#addLeadStatusModal").modal("hide");var t={id:e.data.id,name:e.data.name},a=new Option(t.name,t.id,!1,!0);$("#statusId").append(a).trigger("change")}},error:function(e){displayErrorMessage(e.responseJSON.message)},complete:function(){processingBtn("#addLeadStatusForm","#btnSave")}})})),$("#addLeadStatusModal").on("hidden.bs.modal",(function(){resetModalForm("#addLeadStatusForm","#validationErrorsBox")}))})();