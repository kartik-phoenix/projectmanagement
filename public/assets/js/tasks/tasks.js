(()=>{"use strict";$(document).ready((function(){$("#filter_status").select2({width:"150px"}),$("#priorityId").select2({width:"150px"})}));var e="#tasksTbl";$(e).DataTable({oLanguage:{sEmptyTable:Lang.get("messages.common.no_data_available_in_table"),sInfo:Lang.get("messages.common.data_base_entries"),sLengthMenu:Lang.get("messages.common.menu_entry"),sInfoEmpty:Lang.get("messages.common.no_entry"),sInfoFiltered:Lang.get("messages.common.filter_by"),sZeroRecords:Lang.get("messages.common.no_matching")},processing:!0,serverSide:!0,order:[[2,"desc"]],ajax:{url:route("tasks.index"),beforeSend:function(){startLoader()},data:function(e){e.owner_id=ownerId,e.owner_type=ownerType,e.status=$("#filter_status").find("option:selected").val(),e.priority=$("#priorityId").find("option:selected").val()},complete:function(){stopLoader()}},columnDefs:[{targets:[6],orderable:!1,className:"text-center",width:"6%"},{targets:[1,5],width:"10%"},{targets:[2,3],width:"15%"},{targets:[4],orderable:!1,className:"text-center",width:"5%"},{targets:"_all",defaultContent:"N/A"}],columns:[{data:function(e){var t=document.createElement("textarea");return t.innerHTML=e.subject,'<a class="font-weight-bold anchor-underline" href="'+(route("tasks.index")+"/"+e.id)+'">'+t.value+"</a>"},name:"subject"},{data:function(e){return priorities[e.priority]},name:"priority"},{data:function(e){if(null!=e.start_date)return moment(e.start_date).locale(currentLocale).format("Do MMM, Y HH:mm A")},name:"start_date"},{data:function(e){if(null!=e.due_date)return moment(e.due_date).locale(currentLocale).format("Do MMM, Y HH:mm A")},name:"due_date"},{data:function(e){return null!==e.member_id&&null!==e.user?'<a href="'+route("members.index")+"/"+e.member_id+'"><img src="'+e.user.image_url+'" class="thumbnail-rounded" data-toggle="tooltip" title="'+e.user.full_name+'"></a>':"N/A"},name:"member_id"},{data:function(e){var t=e.status;return'<span class="badge badge-'+{1:"danger",2:"primary",3:"warning",4:"info",5:"success"}[t]+'">'+{1:"Not Started",2:"In Progress",3:"Testing",4:"Awaiting Feedback",5:"Completed"}[t]+"</span>"},name:"status"},{data:function(e){var t=[{id:e.id,editUrl:route("tasks.edit",e.id)}];return prepareTemplateRender("#taskActionTemplate",t)},name:"id"}],fnInitComplete:function(){$(document).on("change","#filter_status",(function(){$(e).DataTable().ajax.reload(null,!0)})),$(document).on("change","#priorityId",(function(){$(e).DataTable().ajax.reload(null,!0)}))}}),$(document).on("click",".delete-btn-task",(function(e){var t=$(e.currentTarget).data("id");deleteItem(route("tasks.destroy",t),"#tasksTbl",Lang.get("messages.contact.task"))})),$(e).on("draw.dt",(function(){$(".tooltip").tooltip("hide"),setTimeout((function(){$('[data-toggle="tooltip"]').tooltip()}))}))})();