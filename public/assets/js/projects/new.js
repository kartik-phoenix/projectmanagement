(()=>{"use strict";$(document).ready((function(){1==$("#calculateProgressThroughTasks").prop("checked")?($("#projectProgress").attr("disabled",!0),$("#percentageId").hide()):($("#projectProgress").removeAttr("disabled"),$("#percentageId").show()),$(document).on("submit","#createProject, #editProject",(function(){if(jQuery(this).find("#btnSave").button("loading"),$("#btnSave").attr("disabled",!0),""!==$("#error-msg").text())return!1;var e=""===$("<div />").html($("#projectDescription").summernote("code")).text().trim().replace(/ \r\n\t/g,"");if($("#projectDescription").summernote("isEmpty"))$("#projectDescription").val("");else if(e){return displayErrorMessage("Description field is not contain only white space"),jQuery(this).find("#btnSave").button("reset"),!1}})),$(document).on("change","#calculateProgressThroughTasks",(function(){1==$(this).prop("checked")?($("#projectProgress").attr("disabled",!0),$("#percentageId").hide()):($("#projectProgress").removeAttr("disabled"),$("#percentageId").show())})),$("#startDate").datetimepicker({format:"YYYY-MM-DD",useCurrent:!1,sideBySide:!0,widgetPositioning:{horizontal:"left",vertical:"bottom"},maxDate:new Date,icons:{up:"fa fa-chevron-up",down:"fa fa-chevron-down",next:"fa fa-chevron-right",previous:"fa fa-chevron-left"}}),$("#deadline").datetimepicker({format:"YYYY-MM-DD",useCurrent:!1,sideBySide:!0,widgetPositioning:{horizontal:"left",vertical:"bottom"},icons:{up:"fa fa-chevron-up",down:"fa fa-chevron-down",next:"fa fa-chevron-right",previous:"fa fa-chevron-left"}}),$("#startDate, #deadline").on("dp.show",(function(){matchWindowScreenPixels({startDate:"#startDate",deadline:"#deadline"},"pro")})),setTimeout((function(){1==editData?$("#deadline").data("DateTimePicker").minDate($("#deadline").val()):$("#deadline").data("DateTimePicker").minDate(moment().add(1,"day"))}),1e3),$("#customersSelectBox").select2({placeholder:Lang.get("messages.placeholder.select_customer"),width:"100%"}),$("#contactsSelectBox").select2({placeholder:Lang.get("messages.contacts"),width:"100%"}),$("#membersSelectBox").select2({placeholder:Lang.get("messages.placeholder.select_member"),width:"100%"}),$("#tablesSelectBox").select2({placeholder:"Select tables",width:"100%"}),$("#billingTypeSelectBox").select2({width:"100%",placeholder:Lang.get("messages.placeholder.select_billing_type")}),$("#statusSelectBox").select2({width:"100%",placeholder:Lang.get("messages.placeholder.select_status")}),$("#tagId").select2({placeholder:Lang.get("messages.tags"),width:"calc(100% - 44px)",multiple:!0}),$(document).on("change","#projectProgress",(function(){$(".projectProgressPercentage").text($(this).val()+"%")})),setTimeout((function(){!1===editData&&""!=$("#customersSelectBox").val()&&$("#customersSelectBox").val($("#customersSelectBox").val()).trigger("change")}),500),setTimeout((function(){1==editData&&""!==$("#customersSelectBox").val()&&$("#customersSelectBox").val($("#customersSelectBox").val()).trigger("change")}),500),$(document).on("change","#customersSelectBox",(function(){var e=$(this).val();$.ajax({url:route("projects.memberAsPerCustomer"),data:{customer_id:e},type:"post",dataType:"json",success:function(e){if(e.success){var t=e.data,a=[];$.each(t,(function(e,t){a+='<option value="'+e+'">'+t+"</option>"})),$("#contactsSelectBox").html(a),1!=editData||isEmpty(editContactIds)||$("#contactsSelectBox").val(editContactIds).trigger("change")}},error:function(e){displayErrorMessage(e.responseJSON.message)}})}))}))})();