(()=>{"use strict";$(document).ready((function(){$("#monthId").select2({width:"130px"}),window.loadContractList=function(e){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a&&($("#contractExpiredTable").DataTable().clear(),$("#contractExpiredTable").DataTable().destroy()),$.each(e,(function(e,a){var t=[{subject:a.subject,customer:a.customer.company_name,startDate:moment(a.start_date).locale(currentLocale).format("Do MMM, Y"),endDate:moment(a.end_date).locale(currentLocale).format("Do MMM, Y")}],n=prepareTemplateRender("#expiredContractsTemplate",t);$(".expiring-contracts").append(n)})),a&&$("#contractExpiredTable").DataTable({oLanguage:{sEmptyTable:Lang.get("messages.common.no_data_available_in_table"),sInfo:Lang.get("messages.common.data_base_entries"),sLengthMenu:Lang.get("messages.common.menu_entry"),sInfoEmpty:Lang.get("messages.common.no_entry"),sInfoFiltered:Lang.get("messages.common.filter_by"),sZeroRecords:Lang.get("messages.common.no_matching")}})},loadContractList(expiringContractLists),$("#contractExpiredTable").DataTable({oLanguage:{sEmptyTable:Lang.get("messages.common.no_data_available_in_table"),sInfo:Lang.get("messages.common.data_base_entries"),sLengthMenu:Lang.get("messages.common.menu_entry"),sInfoEmpty:Lang.get("messages.common.no_entry"),sInfoFiltered:Lang.get("messages.common.filter_by"),sZeroRecords:Lang.get("messages.common.no_matching")}});var e=[],a=[],t=[];$.each(leadData,(function(n,o){var s=o.name;e.push(s.replace("&amp;","&")),a.push(o.color),t.push(o.leads_count)}));var n=document.getElementById("leadChartId"),o=(new Chart(n,{type:"doughnut",data:{labels:e,datasets:[{data:t,backgroundColor:a,hoverOffset:4}]},options:{legend:{display:!1}}}),[]);$.each(projectStatusCounts,(function(e,a){o.push(a)})),o.pop();var s=document.getElementById("projectChartId"),r=(new Chart(s,{type:"doughnut",data:{labels:projectStatus,datasets:[{data:o,backgroundColor:["#fc544b","#6777ef","#ffa426","#3abaf4","#47c363"],hoverOffset:4}]},options:{legend:{display:!1}}}),[]),c=[],d=[];$.each(ticketStatusData,(function(e,a){var t=a.name;r.push(t.replace("&amp;","&")),c.push(a.pick_color),d.push(a.tickets_count)}));var l=document.getElementById("ticketChartId"),m=(new Chart(l,{type:"doughnut",data:{labels:r,datasets:[{data:d,backgroundColor:c}]},options:{legend:{display:!1}}}),Object.keys(currentWeekInvoices)),g=Object.values(currentWeekInvoices),i=Object.values(lastWeekInvoices),b=document.getElementById("weeklyPaymentChart"),u=(new Chart(b,{type:"bar",data:{labels:m,datasets:[{label:[" This Week Payments "],data:g,backgroundColor:"#d3ebd3",borderColor:"#91cb41",borderWidth:2},{label:[" Last Week Payments "],data:i,backgroundColor:"#e29ed4",borderColor:"#d36dbe",borderWidth:2}]},options:{responsive:!0,scales:{yAxes:[{ticks:{min:0}}]}}}),Object.keys(incomeAndExpenseData.income)),p=Object.values(incomeAndExpenseData.income),h=Object.values(incomeAndExpenseData.expenses),y=document.getElementById("incomeVsExpenseChart");new Chart(y,{type:"bar",data:{labels:u,datasets:[{label:[Lang.get("messages.incomes")],data:p,backgroundColor:"#d3ebd3",borderColor:"#91cb41",borderWidth:2},{label:[Lang.get("messages.expenses")],data:h,backgroundColor:"#feabb3",borderColor:"#fd6c7b",borderWidth:2}]},options:{responsive:!0,scales:{yAxes:[{ticks:{min:0}}]}}});$(document).on("change","#monthId",(function(){var e=$(this).val();$.ajax({url:route("contract.month.filter"),type:"POST",data:{month:e},success:function(e){e.success&&(e.data.length>0?loadContractList(e.data,!0):$("#contractExpiredTable").DataTable().clear().draw())}})}))}))})();