(()=>{"use strict";var t=Handlebars.compile('<a href="#" data-id="{{id}}" class="dropdown-item dropdown-item-unread readNotification"\n                   id="readNotification">\n                    <div class="dropdown-item-icon bg-primary text-white">\n                        <i class="{{icon}}" style="line-height: unset;"></i>\n                    </div>\n                    <div class="dropdown-item-desc text-dark notification-title" style="width: 100%;">{{title}}\n                        <div class="">\n                            <span class="notification-for-text" style="line-break: anywhere;color: grey">{{description}}</span>\n                        </div>\n                        <div class="float-right">\n                            <small class="notification-time">{{time}}</small>\n                        </div>\n                    </div>\n                </a>');function n(t){var n=t.substring(11);return"Project"==n?"fas fa-folder-open":"Task"==n?"fas fa-tasks":"Invoice"==n?"fas fa-file-invoice":"User"==n?"fas fa-users":"fas fa-bell"}$(document).ready((function(){getNotifications()})),setInterval((function(){getNotifications()}),12e4),window.getNotifications=function(){$.ajax({url:"/get-notifications",method:"GET",success:function(i){i.success&&($(".notification-content").find("a").remove(),i.data.length>0?($(".notification-content").css("overflow-y","auto"),$(".nav-link.notification-toggle").addClass("beep"),$("#allRead").removeClass("d-none"),$(".empty-notification").addClass("d-none"),$.each(i.data,(function(i,e){$(".notification-content").append(t({id:e.id,title:e.title,description:e.description,icon:n(e.type),time:moment(e.created_at).fromNow()}))}))):($("#allRead").addClass("d-none"),$(".empty-notification").removeClass("d-none")))}})},$(document).on("click","#readNotification",(function(t){t.preventDefault(),t.stopPropagation();var n=$(this).data("id");$(this).remove(),$.ajax({type:"POST",url:"/notification/"+n+"/read",data:{notificationId:n},success:function(){0==document.getElementsByClassName("readNotification").length&&($("#allRead").addClass("d-none"),$(".empty-notification").removeClass("d-none"),$(".nav-link.notification-toggle").removeClass("beep"))},error:function(t){manageAjaxErrors(t)}})})),$(document).on("click","#allRead",(function(t){t.preventDefault(),t.stopPropagation(),$.ajax({type:"POST",url:"/read-all-notification",success:function(){$(".readNotification").remove(),$("#allRead").addClass("d-none"),$(".empty-notification").removeClass("d-none"),$(".nav-link.notification-toggle").removeClass("beep")},error:function(t){manageAjaxErrors(t)}})}))})();