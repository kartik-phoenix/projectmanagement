(()=>{"use strict";var e=route("customers.index");$(document).ready((function(){$("#groupId").select2({width:"calc(100% - 44px)",placeholder:Lang.get("messages.placeholder.select_groups"),multiple:!0}),$("#customerId").select2({width:"200px"}),$("#currencyId,#countryId,#languageId,#billingCountryId,#shippingCountryId").select2({width:"100%"}),$(document).on("click",".addressModalIcon",(function(){$("#addModal").appendTo("body").modal("show")})),""!==$("#billingStreet").val()&&""!==$("#billingCity").val()&&""!==$("#billingState").val()&&""!==$("#billingZip").val()&&$("#shippingAddressCheck").removeAttr("disabled"),$(document).on("keypress keyup","#billingStreet, #billingCity, #billingState, #billingZip",(function(){""===$("#billingStreet").val()&&""===$("#billingCity").val()&&""===$("#billingState").val()&&""===$("#billingZip").val()?$("#shippingAddressCheck").attr("disabled",!0):$("#shippingAddressCheck").removeAttr("disabled")})),$(document).on("click","#copyBillingAddress",(function(){!0===$("#shippingAddressCheck").prop("checked")?($("#shippingStreet").val($("#billingStreet").val()),$("#shippingCity").val($("#billingCity").val()),$("#shippingState").val($("#billingState").val()),$("#shippingZip").val($("#billingZip").val()),$("#shippingCountryId").val($("#billingCountryId").val()).trigger("change.select2")):($("#shippingStreet").val(""),$("#shippingCity").val(""),$("#shippingState").val(""),$("#shippingZip").val(""),$("#shippingCountryId").val("").trigger("change.select2"))})),$(document).on("change","#customerId",(function(){var i=window.location.href.substring(window.location.href.lastIndexOf("/")+1);location.href=isNaN(i)?e+"/"+$(this).val()+"/"+i:e+"/"+$(this).val()+"/profile"})),$(document).on("submit","#createCustomer, #editCustomer",(function(){return isEmpty($("#company_name").val())?(displayErrorMessage("The Company Name field is required."),!1):""!==$("#error-msg").text()?($("#phoneNumber").focus(),!1):(jQuery(this).find("#btnSave").button("loading"),void $("#btnSave").prop("disabled",!0))})),$(document).on("submit","#addressForm",(function(e){e.preventDefault();$("#customer_id").val();$.ajax({url:route("add.customer.address"),type:"POST",data:$(this).serialize(),success:function(e){e.success&&($("#addModal").modal("hide"),location.reload())},error:function(e){displayErrorMessage(e.responseJSON.message)},complete:function(){processingBtn("#addNewForm","#btnSave")}})})),$(document).on("blur","#website",(function(){var e=$(this).val();isEmpty(e)?$("#website").val(""):(e=websiteURLConvert(e),$("#website").val(e))})),window.websiteURLConvert=function(e){return~e.indexOf("http")||(e="http://"+e),e},$(".address-modal").on("hidden.bs.modal",(function(){$("#shippingAddressCheck").prop("checked",!1),$("#billingCountryId,#shippingCountryId").val("").trigger("change"),resetModalForm("#addressForm","#validationErrorsBox")})),$(document).on("submit","#addCustomerGroupForm",(function(e){e.preventDefault(),processingBtn("#addCustomerGroupForm","#btnSave","loading"),$.ajax({url:route("customer-groups.store"),type:"POST",data:$(this).serialize(),success:function(e){if(e.success){$("#customerGroupModal").modal("hide"),displaySuccessMessage(e.message);var i={id:e.data.id,name:e.data.name},t=new Option(i.name,i.id,!1,!0);$("#groupId").append(t).trigger("change")}},error:function(e){displayErrorMessage(e.responseJSON.message)},complete:function(){processingBtn("#addCustomerGroupForm","#btnSave")}})})),$("#customerGroupModal").on("hidden.bs.modal",(function(){resetModalForm("#addCustomerGroupForm","#validationErrorsBox")}))}))})();