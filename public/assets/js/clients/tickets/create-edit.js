(()=>{"use strict";$(document).ready((function(){$("#tagId").select2({width:"100%",placeholder:Lang.get("messages.placeholder.select_tags")}),$("#priorityId").select2({width:"100%"}),$("#serviceId").select2({width:"100%"}),$("#departmentId").select2({width:"100%"}),$("#assignToId").select2({width:"100%"}),$("#ticketStatusId").select2({width:"100%",placeholder:Lang.get("messages.placeholder.select_status")}),$(".ticketBody").summernote({dialogsInBody:!0,minHeight:150,toolbar:[["style",["bold","italic","underline","clear"]],["font",["strikethrough"]],["para",["paragraph"]]]}),$(document).on("mouseenter",".ticket-attachment",(function(){$(this).find(".attachment-delete").removeClass("d-none")})),$(document).on("mouseleave",".ticket-attachment",(function(){$(this).find(".attachment-delete").addClass("d-none")})),$(document).on("click",".attachment-delete",(function(e){var t=$(e.currentTarget).data("id");swal({title:Lang.get("messages.common.delete")+"!",text:Lang.get("messages.common.delete_attachment"),type:"warning",showCancelButton:!0,closeOnConfirm:!1,showLoaderOnConfirm:!0,confirmButtonColor:"#6777ef",cancelButtonColor:"#d33",cancelButtonText:"No",confirmButtonText:"Yes"},(function(){$.ajax({url:ticketAttachmentUrl,type:"DELETE",dataType:"json",data:{mediaId:t},success:function(e){e.success&&window.location.reload(),swal({title:Lang.get("messages.common.deleted"),text:Lang.get("messages.common.attachment_deleted"),type:"success",confirmButtonColor:"#6777ef",timer:2e3})},error:function(e){swal({title:"",text:e.responseJSON.message,type:"error",confirmButtonColor:"#6777ef",timer:5e3})}})}))})),document.querySelector("#attachment").addEventListener("change",(function(t){if(!t.target.files||!window.FileReader)return;e.innerHTML="";for(var n=t.target.files,i=function(t){var i=n[t],a=new FileReader;a.onload=function(t){if(i.type.match("image*")){var n="<img class='img-thumbnail thumbnail-preview ticket-attachment' src=\""+t.target.result+'">';e.innerHTML+=n}else if(i.type.match("pdf*")){e.innerHTML+="<img class='img-thumbnail thumbnail-preview ticket-attachment' src=\"/assets/img/pdf_icon.png\">"}else if(i.type.match("zip*")){e.innerHTML+="<img class='img-thumbnail thumbnail-preview ticket-attachment' src=\"/assets/img/zip_icon.png\">"}else if(i.type.match("sheet*")){e.innerHTML+="<img class='img-thumbnail thumbnail-preview ticket-attachment' src=\"/assets/img/xlsx_icon.png\">"}else if(i.type.match("text*")){e.innerHTML+="<img class='img-thumbnail thumbnail-preview ticket-attachment' src=\"/assets/img/txt_icon.png\">"}else if(i.type.match("msword*")){e.innerHTML+="<img class='img-thumbnail thumbnail-preview ticket-attachment' src=\"/assets/img/doc_icon.png\">"}else e.innerHTML+=i.name},a.readAsDataURL(i)},a=0;a<n.length;a++)i(a)}),!1);var e=document.querySelector("#attachmentFileSection");$(document).on("mouseenter",".ticket-attachment",(function(){$(this).find(".ticket-attachment__icon").removeClass("d-none")})),$(document).on("mouseleave",".ticket-attachment",(function(){$(this).find(".ticket-attachment__icon").addClass("d-none")}))})),$(document).on("submit","#createTicket",(function(){if(jQuery(this).find("#btnSave").button("loading"),""!==$("#error-msg").text())return!1;var e=""===$("<div />").html($("#ticketBody").summernote("code")).text().trim().replace(/ \r\n\t/g,"");if($("#ticketBody").summernote("isEmpty"))$("#ticketBody").val("");else if(e){return displayErrorMessage("Description field is not contain only white space"),jQuery(this).find("#btnSave").button("reset"),!1}}))})();